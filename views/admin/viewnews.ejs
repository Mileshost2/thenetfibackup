<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News</title>
    <link rel="stylesheet" href="/stylesheets/admin/viewnews.css">
</head>
<body>
    <%- include('../partials/adminnavbar')%>

    <div class="contentbox">

        <div id="header">
            <div id="headerinner">
                <span class="headerinnerspan"><i class="fa-solid fa-newspaper headericon"></i> <small>News</small></span>
                <span class="headerinnerspan"><a href="/admin/admin.dashboard"><i class="fas fa-project-diagram headericon"></i></a></span>
            </div>
          </div>

        <div class="flashbox">
            <% if(success && success.length) { %>
                   <div class="flashboxsuccess-alert">
                       <%= success %> 
                       <span class="flashboxsuccess-closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                       
                   </div>
               <% } %> 
           
               <% if(error && error.length) { %>
                       <div class="flashboxerror-alert">
                           <%= error %> 
                           <span class="flashboxerror-closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                           
                       </div>
               <% } %> 
               
        </div>

        <% function capitalizeFirstLetter(word) {
            return word.charAt(0).toUpperCase() + word.slice(1);
            } 

            function capitalizeEachWord(sentence) {
                return sentence.split(' ').map(capitalizeFirstLetter).join(' ');
            } 
        %>

        <div id="taskbox">
            <div id="innertaskbox">
                <div class="taskcontentbox">
                    <div class="imagescontainer">
                        <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                        
                            <div class="carousel-inner">
                              <% news.postpictures.forEach((img, i) => { %> 
                              <div class="carousel-item <%= i === 0 ? 'active' : '' %> ">
                                <img src="<%= img.url %>" class="d-block w-100" alt="">
                              </div>
                              <% }) %> 
                            </div>
                            <% if (news.postpictures.length > 1) { %> 
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                              <span class="carousel-control-prev-icon" id="prev" aria-hidden="true"></span>
                              <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Next</span>
                            </button>
                            <% } %> 
                          </div>
                    </div>
                </div>

                <div class="taskcontentbox">
                    <div class="boxtitle">
                        <p>News Title</p>
                    </div>
                    <div class="boxcontent">
                        <p><%= news.title %></p>
                    </div>
                </div>

                <div class="taskcontentbox">
                    <div class="boxtitle">
                        <p>Date Posted</p>
                    </div>
                    <div class="boxcontent">
                        <p><%= news.date %></p>
                    </div>
                </div>

                <div class="taskcontentbox">
                    <div class="boxtitle">
                        <p>News Info</p>
                    </div>
                    <div class="boxcontent">
                        <p><%- news.description.replace(/\n/g,'<br>') %></p>
                    </div>
                </div>

                

                


                <div class="actionbox">
                   <!-- Button trigger modal -->
                   <button type="button" class="btn btn-danger actionbtn" data-bs-toggle="modal" data-bs-target="#delUser">
                        Delete News
                    </button>
               
                    <!-- Modal -->
                    <div class="modal fade" id="delUser" tabindex="-1" aria-labelledby="delUserLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-body">
                                <form action="/admin/admin.news/<%= news.id%>/delete?_method=DELETE" class="taskform" method="post">
                                        <div class="formgroup">
                                            <span>Are you sure you want to delete this news?</span>
                                        </div>
                                    <button type="submit" class="btn btn-danger mt-2">Delete</button>
                                </form>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>

        
    
    </div>
    
    <script src="/script/app.js"></script>
</body>
</html>