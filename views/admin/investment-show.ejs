<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment</title>
    <link rel="stylesheet" href="/stylesheets/admin/investmentinfo.css">
</head>
<body>
    <%- partial('../partials/adminnavbar')%>

    <div class="contentbox">
        <div id="pageintrobox">
            <div id="innerpageintrobox">
                
                <% if (investment.packagetype === 'Buy' || investment.packagetype === 'Sell') { %>
                    <h5>Trade Info</h5>
                    <!-- <p>This is a signal trade placed from the main user's dashboard.</p> -->
                <% } else if (investment.investmentType === 'Staking') { %>
                    <h5>Pool Info</h5>
                    <p>This is an asset staked through the staking page in the user's account.</p>
                    <% } else if (investment.investmentType === 'Real Estate') { %>
                        <h5>Project Info</h5>
                        <p>This is an investment on real estate.</p>
                    <% } else { %>
                    <h5>Trade Info</h5>
                    <p>This is a trade placed from the user's trade center.</p>
                <% } %>
            </div>
        </div>
        

        <div class="flashbox">
            <% if(success && success.length) { %>
                   <div class="flashboxsuccess-alert">
                       <%= success %> 
                       <span class="flashboxsuccess-closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                       
                   </div>
               <% } %> 
           
               <% if(error && error.length) { %>
                       <div class="flashboxerror-alert">
                           <%= error %> 
                           <span class="flashboxerror-closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                           
                       </div>
               <% } %> 
               
        </div>

        <div id="depositbox">
            <div id="depositmethodbox">
                    <% if (investment.packagetype === 'Buy' || investment.packagetype === 'Sell') { %>
                        <div class="depositmethodboxclass">
                            <span>
                                <p>Trade ID:</p>
                                <small><%= investment.id %></small>
                            </span>
                            <span>
                                <p>Trade Type:</p>
                                <small><%= investment.investmentType %></small>
                            </span>
        
                            <span>
                                <p>Order Type:</p> 
                                <small><%= investment.packagetype %> <%= investment.tradedCurrency %></small>
                            </span>
        
                            <span>
                                <p>Duration of Trade:</p>
                                <small><%= investment.duration %></small>
                            </span>
                            <span>
                                <p>Amount Traded:</p>
                                <small>$<%= investment.investedamount.toLocaleString() %></small>
                            </span>
                            <span>
                                <p>Profits:</p>
                                <small>$<%= investment.investmentprofit.toLocaleString() %></small>
                            </span>
                            <span>
                                <p>Trade Status:</p>
                                <% if (investment.status === 'Pending') { %> 
                                    <small class="unverifiedstat"><%= investment.status %></small>
                                <% } else if (investment.status === 'Completed'){ %> 
                                    <small class="verifiedstat"><%= investment.status %></small>
                                <% } else if (investment.status === 'Active'){ %> 
                                    <small class="pendingstat"><%= investment.status %></small>
                                <% } %> 
                                
                            </span>
                            <span class="depositmethodboxaction">
                                <% if (investment.status == 'Active') { %> 
                                    <button type="button" class="btn btn-primary depositbtn" data-bs-toggle="modal" data-bs-target="#increaseModal">
                                        <!-- <i class="fa-solid fa-check"></i>  -->
                                        Add Profit
                                    </button>
            
                                    <button type="button" class="btn btn-primary depositbtn" data-bs-toggle="modal" data-bs-target="#decreaseModal">
                                        <!-- <i class="fa-solid fa-xmark"></i>  -->
                                        Deduct Profit
                                    </button>
    
                                    <button type="button" class="btn btn-danger" id="end" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                        End Trade
                                    </button>
                            
                                <% } else if (investment.status == 'Completed') { %> 
                                    <button type="button" class="btn btn-primary">
                                        Trade Completed
                                    </button>
                                <% } else { %> 
                                    <button type="button" class="btn btn-primary">
                                        Trade Pending!
                                    </button>
                                <% } %> 
                            </span>
        
            
    
                             <!-- Modal -->
                            <div class="modal fade" id="increaseModal" tabindex="-1" aria-labelledby="increaseModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        Input the amount of profit to be added to this trade.
                                        <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/increase?_method=PUT" method="post" class="addfundsform">
                                            <input type="number" placeholder="Amount to be added" class="addfundsforminput" name="addprofits" required>
                                            <button class="btn btn-success" >Proceed</button>
                                        </form>
                                    </div>
                                </div>
                                </div>
                            </div>
    
                            <!-- Modal -->
                            <div class="modal fade" id="decreaseModal" tabindex="-1" aria-labelledby="decreaseModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        Input the amount of money to be deducted from this trade.
                                        <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/deduct?_method=PUT" method="post" class="addfundsform">
                                            <input type="number" placeholder="Amount" class="addfundsforminput" name="amount" required>
                                            <button class="btn btn-success" >Proceed</button>
                                        </form> 
                                    </div>
                                </div>
                                </div>
                            </div>
    
                            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <p>Do you wish to close this trade?</p>
                                            <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/endinvestment?_method=PUT" method="post" >
                                                <button class="btn btn-danger">Proceed</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    <% } else if (investment.investmentType === 'Staking') { %>
                        <div class="depositmethodboxclass">
                            <span>
                                <p>Pool ID:</p>
                                <small><%= investment.id %></small>
                            </span>
                            <span>
                                <p>Date</p>
                                <small><%= investment.startDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit'}) %>, <%= investment.startDate.toLocaleDateString('en-US', { weekday: 'short'}) %>, <%= investment.startDate.toISOString().split('T')[0] %> </small>
                            </span>
                            <span>
                                <p>Pool Type:</p>
                                <small><%= investment.investmentType %></small>
                            </span>
                            <span>
                                <p>Asset:</p>
                                <small><%= investment.tradedCurrency %></small>
                            </span>
                            <span>
                                <p>Duration of Pool:</p>
                                <small><%= investment.duration %></small>
                            </span>
                            <span>
                                <p>USD Amount worth of <%= investment.tradedCurrency %> Staked:</p>
                                <small>$<%= investment.investedamount.toLocaleString() %></small>
                            </span>
                            <span>
                                <p>Profits:</p>
                                <small>$<%= investment.investmentprofit.toLocaleString() %></small>
                            </span>
                            <span>
                                <p>Estimated Expected Income:</p>
                                <small>$<%= investment.expectedincome.toLocaleString() %></small>
                            </span>
                            <span>
                            <span>
                                <p>Pool Status:</p>
                                <% if (investment.status === 'Pending') { %> 
                                    <small class="unverifiedstat"><%= investment.status %></small>
                                <% } else if (investment.status === 'Completed'){ %> 
                                    <small class="verifiedstat"><%= investment.status %></small>
                                <% } else if (investment.status === 'Active'){ %> 
                                    <small class="pendingstat"><%= investment.status %></small>
                                <% } %> 
                                
                            </span>
                            <span class="depositmethodboxaction">
                                <% if (investment.status == 'Active') { %> 
                                    <button type="button" class="btn btn-primary depositbtn" data-bs-toggle="modal" data-bs-target="#increaseModal">
                                        <!-- <i class="fa-solid fa-check"></i>  -->
                                        Add Profit
                                    </button>
    
                                    <button type="button" class="btn btn-danger" id="end" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                        Stop Pool
                                    </button>
                            
                                <% } else if (investment.status == 'Completed') { %> 
                                    <button type="button" class="btn btn-primary">
                                        Pool Closed
                                    </button>
                                <% } else { %> 
                                    <button type="button" class="btn btn-primary">
                                        Pool Pending!
                                    </button>
                                <% } %> 
                            </span>
        
            
    
                             <!-- Modal -->
                            <div class="modal fade" id="increaseModal" tabindex="-1" aria-labelledby="increaseModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        Input the amount of profit to be added to this pool.
                                        <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/increase-extra?_method=PUT" method="post" class="addfundsform">
                                            <input type="number" placeholder="Amount to be added" class="addfundsforminput" name="addprofits" required>
                                            <button class="btn btn-success" >Proceed</button>
                                        </form>
                                    </div>
                                </div>
                                </div>
                            </div>
    
                           
    
                            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <p>Do you wish to close this pool?</p>
                                            <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/close?_method=PUT" method="post" >
                                                <button class="btn btn-danger">Proceed</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <% } else if (investment.investmentType === 'Real Estate') { %>
                            <div class="depositmethodboxclass">
                                <span>
                                    <p>Project ID:</p>
                                    <small><%= investment.id %></small>
                                </span>
                                <span>
                                    <p>Date</p>
                                    <small><%= investment.startDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit'}) %>, <%= investment.startDate.toLocaleDateString('en-US', { weekday: 'short'}) %>, <%= investment.startDate.toISOString().split('T')[0] %> </small>
                                </span>
                                <span>
                                    <p>Project:</p>
                                    <small><%= investment.tradedCurrency %></small>
                                </span>
                                <span>
                                    <p>Duration:</p>
                                    <small><%= investment.duration %></small>
                                </span>
                                <span>
                                    <p>Amount Invested:</p>
                                    <small>$<%= investment.investedamount.toLocaleString() %></small>
                                </span>
                                <span>
                                    <p>Profits:</p>
                                    <small>$<%= investment.investmentprofit.toLocaleString() %></small>
                                </span>
                                <span>
                                    <p>Estimated Expected Income:</p>
                                    <small>$<%= investment.expectedincome.toLocaleString() %></small>
                                </span>
                                    <span>
                                        <p>Project Status:</p>
                                        <% if (investment.status === 'Pending') { %> 
                                            <small class="unverifiedstat"><%= investment.status %></small>
                                        <% } else if (investment.status === 'Completed'){ %> 
                                            <small class="verifiedstat"><%= investment.status %></small>
                                        <% } else if (investment.status === 'Active'){ %> 
                                            <small class="pendingstat"><%= investment.status %></small>
                                        <% } %> 
                                        
                                    </span>
                                <span class="depositmethodboxaction">
                                    <% if (investment.status == 'Active') { %> 
                                        <button type="button" class="btn btn-primary depositbtn" data-bs-toggle="modal" data-bs-target="#increaseModal">
                                            <!-- <i class="fa-solid fa-check"></i>  -->
                                            Add Profit
                                        </button>
        
                                        <button type="button" class="btn btn-danger" id="end" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                            End Investment
                                        </button>
                                
                                    <% } else if (investment.status == 'Completed') { %> 
                                        <button type="button" class="btn btn-primary">
                                            Investment Closed
                                        </button>
                                    <% } else { %> 
                                        <button type="button" class="btn btn-primary">
                                            Investment Pending!
                                        </button>
                                    <% } %> 
                                </span>
            
                
        
                                 <!-- Modal -->
                                <div class="modal fade" id="increaseModal" tabindex="-1" aria-labelledby="increaseModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            Input the amount of profit to be added to this pool.
                                            <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/increase-extra?_method=PUT" method="post" class="addfundsform">
                                                <input type="number" placeholder="Amount to be added" class="addfundsforminput" name="addprofits" required>
                                                <button class="btn btn-success" >Proceed</button>
                                            </form>
                                        </div>
                                    </div>
                                    </div>
                                </div>
        
                               
        
                                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-body">
                                                <p>Do you wish to close this pool?</p>
                                                <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/close?_method=PUT" method="post" >
                                                    <button class="btn btn-danger">Proceed</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        <% } else { %>
                        <div class="depositmethodboxclass">
                            <span>
                                <p>Trade ID:</p>
                                <small><%= investment.id %></small>
                            </span>
                            <span>
                                <p>Trade Type:</p>
                                <small><%= investment.investmentType %></small>
                            </span>
        
                            <span>
                                <p>Trade Plan:</p> 
                                <small><%= investment.packagetype %></small>
                            </span>

                            <span>
                                <p>Traded Currency:</p> 
                                <small><%= investment.tradedCurrency %></small>
                            </span>
        
                            <span>
                                <p>Duration of Trade:</p>
                                <small><%= investment.duration %></small>
                            </span>
                            <!-- <span>
                                <p>Return of Investment (ROI):</p>
                                <small><%= investment.roi %></small>
                            </span> -->
                            <span>
                                <p>Amount Traded:</p>
                                <small>$<%= investment.investedamount.toLocaleString() %></small>
                            </span>
                            <span>
                                <p>Profits:</p>
                                <small>$<%= investment.investmentprofit.toLocaleString() %></small>
                            </span>
                            <span>
                                <p>Trade Status:</p>
                                <% if (investment.status === 'Pending') { %> 
                                    <small class="unverifiedstat"><%= investment.status %></small>
                                <% } else if (investment.status === 'Completed'){ %> 
                                    <small class="verifiedstat"><%= investment.status %></small>
                                <% } else if (investment.status === 'Active'){ %> 
                                    <small class="pendingstat"><%= investment.status %></small>
                                <% } %> 
                                
                            </span>
                            <span class="depositmethodboxaction">
                                <% if (investment.status == 'Active') { %> 
                                    <button type="button" class="btn btn-primary depositbtn" data-bs-toggle="modal" data-bs-target="#increaseModal">
                                        <!-- <i class="fa-solid fa-check"></i>  -->
                                        Add Profit
                                    </button>
            
                                    <button type="button" class="btn btn-primary depositbtn" data-bs-toggle="modal" data-bs-target="#decreaseModal">
                                        <!-- <i class="fa-solid fa-xmark"></i>  -->
                                        Deduct Profit
                                    </button>
    
                                    <button type="button" class="btn btn-danger" id="end" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                        End Investment
                                    </button>
                            
                                <% } else if (investment.status == 'Completed') { %> 
                                    <button type="button" class="btn btn-primary">
                                        Investment Completed
                                    </button>
                                <% } else { %> 
                                    <button type="button" class="btn btn-primary">
                                        Investment Pending!
                                    </button>
                                <% } %> 
                            </span>
        
            
    
                             <!-- Modal -->
                            <div class="modal fade" id="increaseModal" tabindex="-1" aria-labelledby="increaseModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        Input the amount of profit to be added to this trade.
                                        <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/increase?_method=PUT" method="post" class="addfundsform">
                                            <input type="number" placeholder="Amount to be added" class="addfundsforminput" name="addprofits" required>
                                            <button class="btn btn-success" >Proceed</button>
                                        </form>
                                    </div>
                                </div>
                                </div>
                            </div>
    
                            <!-- Modal -->
                            <div class="modal fade" id="decreaseModal" tabindex="-1" aria-labelledby="decreaseModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                <div class="modal-content">
                                    <!-- <div class="modal-header">
                                    <h5 class="modal-title" id="decreaseModalLabel">DECLINE DEPOSIT</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div> -->
                                    <div class="modal-body">
                                        Input the amount of money to be deducted from this trade.
                                        <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/deduct?_method=PUT" method="post" class="addfundsform">
                                            <input type="number" placeholder="Amount" class="addfundsforminput" name="amount" required>
                                            <button class="btn btn-success" >Proceed</button>
                                        </form> 
                                    </div>
                                </div>
                                </div>
                            </div>
    
                            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <!-- <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Close Trade</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div> -->
                                        <div class="modal-body">
                                            <p>Do you wish to close this trade?</p>
                                            <form action="/admin/admin.investment/<%= client.id%>/<%= investment.id%>/endinvestment?_method=PUT" method="post" >
                                                <button class="btn btn-danger">Proceed</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    <% } %>
            </div>
        </div>

        <div id="trackercontentbox">
            <div class="history " id="activityDiv">
               <div class="historybox">
                   <p>TRADE ACTIVITY</p>
                   <div class="tablecontainer">
                       <table class="historytable">
                           <thead>
                             <tr>
                               <th>S/N</th>
                               <th>Date</th>
                               <th>Action</th>
                               <th>Amount</th>
                               <!-- <th>Status</th> -->
                             </tr>
                           </thead>
                
                           <tbody>
                               <% if (tradeactivity.length < 1 ) { %>
                                   <td colspan="4">No data for this trade yet.</td>
                               <% } else { %>
                                   <% for (let data of tradeactivity) {%>
                                       <tr>
                                         <td><li></td>
                                          <td><%= data.date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit'}) %> <%= data.date.toLocaleDateString('en-US', { weekday: 'short'}) %>, <%= data.date.toISOString().split('T')[0] %> </td>
                                         <td><%= data.action %> </td>
                                         <td>$<%= data.amount.toLocaleString() %></td>
                                         <!-- <td>
                                              <% if (data.status === 'Pending') { %>
                                                   <b class="pendingstatus"><%= data.status %></b>
                                              <% } else if (data.status === 'Successful'){ %>
                                                  <b class="activestatus"><%= data.status %></b>
                                              <% } else if (data.status === 'Unsuccessful'){ %>
                                                      <b class="inactivestatus"><%= data.status %></b>
                                              <% } %> 
                                         </td> -->
                                       </tr>
                                       <% } %> 
                               <% } %> 
                           </tbody>
                         </table>
                   </div>
                  </div>
            </div>
       </div>


    </div>
    

    <script src="/script/app.js"></script>
</body>
</html>